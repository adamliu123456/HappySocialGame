# 社交对战游戏开发蓝图（MVP -> 可运营）

## 1. 产品定位

- **核心定位**：轻中度策略 + 高社交密度的异步回合对战。
- **目标人群**：喜欢策略博弈但不愿承受高实时压力的玩家；有好友组队、公会社交需求的用户。
- **首年目标**：验证“回合制社交竞技 + 赛季通行证 + 外观变现”的闭环。

## 2. 玩法方案（优先原型 B）

### 2.1 单局规则（2-4 人）

- 棋盘：6x6（MVP 可 5x5）。
- 单位：每人 3 名英雄（镜像开局便于平衡）。
- 回合：每回合可执行 `1 次移动 + 1 次攻击/技能`。
- 时间：异步阶段每回合 8 小时上限；限时模式每回合 20 秒。
- 胜负：
  - 击败全部对手单位；或
  - 回合上限后按控制区分数结算。

### 2.2 MVP 特色

- **异步提交**：离线可下达指令，服务器结算后推送结果。
- **实时切换**：双方都在线时可切换“快速模式”。
- **观战复盘**：完整行动日志与关键帧回放。
- **回合注释**：聊天里可挂载“这步为何这样下”的说明。

## 3. 社交系统

1. 好友系统：添加、邀请、快速挑战。
2. 公会系统（M2 版本）：公会周赛 + 战报频道。
3. 房间系统：密码房、观战位、复盘共享。
4. 社交激励：
   - 每周与好友对战任务；
   - 公会协作任务（不要求付费）。

## 4. 排位与匹配

### 4.1 算法使用建议

- 1v1：Elo（实现简单，调参与反馈清晰）。
- 新玩家/低场次：Glicko-2（RD 高，涨跌更快）。
- 多人或组队：TrueSkill 思路（MVP 可先用“名次驱动简化版”）。

### 4.2 匹配策略

- 目标函数：等待时间、实力差、网络/地区、组队协同因子。
- 扩圈机制：每 20 秒扩大可匹配分差。
- 防滥用：
  - 同 IP/设备短时重复对局限权重；
  - 异常让分检测（异常输赢序列）。

## 5. 经济与变现（公平优先）

### 5.1 三层结构

1. 纯外观：角色皮肤、棋盘皮肤、表情、击败特效。
2. 战斗通行证：赛季任务 + 里程碑奖励。
3. 活动礼包/可选抽取：仅提供外观或非数值便利。

### 5.2 合规约束

- 若存在付费随机产出：
  - 购买前明确披露概率、保底规则、奖池内容；
  - 按发行地区落实年龄、隐私与消费限制。

## 6. 技术架构（MVP）

- `Gateway API`：登录、房间、社交入口。
- `Turn Service`：行动校验、战斗结算、回放日志。
- `Match Service`：排位池、队列与扩圈策略。
- `Progression Service`：赛季任务、通行证、奖励发放。
- `Analytics Pipeline`：留存、对局时长、任务完成率。

数据存储建议：

- PostgreSQL：玩家与进度主数据。
- Redis：匹配池、临时回合状态、排行榜缓存。
- 对象存储：回放关键帧。

## 7. 里程碑

- **M1（4-6 周）**：1v1 异步对战、Elo、好友挑战、基础回放。
- **M2（6-8 周）**：2-4 人房间、简化多人评分、赛季任务。
- **M3（8-10 周）**：公会周赛、通行证、外观商城、风控增强。

## 8. 核心指标（上线后 90 天）

- D1 >= 35%，D7 >= 12%。
- 日均对局数 >= 3。
- 好友互邀转化 >= 18%。
- 通行证购买率（活跃用户）>= 4%。

## 9. 风险与应对

- 风险：异步节奏慢导致流失。
  - 应对：限时模式 + 推送召回 + 回合奖励。
- 风险：多人评分引发“感觉不公平”。
  - 应对：公开评分变化说明 + 赛季重置规则透明。
- 风险：活动内容产能不足。
  - 应对：模板化任务系统 + 复用赛季主题资产。
